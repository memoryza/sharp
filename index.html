<!DOCTYPE html>
    <head>
  	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="chrome=1">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>sharp</title>
    </head>
    <body>
        <input type="text" id="input">

        <script type="text/javascript">
            var doc = document; 

            var array,step,turn;
            function init(){
                array = [[null,null,null],[null,null,null],[null,null,null]];
                step = 0;
                turn = 'human';
            }

            init();

            var _input = doc.querySelector('input');

            _input.addEventListener('change',function(){
                var _v1 = ~~this.value.slice(0,1);
                var _v2 = ~~this.value.slice(1,2);
                if(!array[_v1]){return false;}
                if(array[_v1][_v2] !== null){return false;}
                array[_v1][_v2] = 'you';
                console.clear();
                console.log(array[0]);
                console.log(array[1]);
                console.log(array[2]);
                var _start = Date.now();
                // for(var n=0;n<1000;n++){
                    judgeWin();
                // }

                console.log( Date.now() - _start);
                comTurn();
                step++;
            });

            function comTurn(){
                

                
                step++;
            }

            function next(){
                if(turn == 'human'){
                    turn = 'computer';
                }else{
                    turn = 'human'
                }
            }

            function judgeWin(){
                for(var i=0;i<array.length;i++){
                    for(var j=0;j<array[i].length;j++){
                        if(array[i][j] == null){continue;}

                        if(array[i][j%3] == array[i][(j+1)%3] && array[i][(j+1)%3]  == array[i][(j+2)%3] ){
                            alert(array[i][j] + ' win!');
                            init();
                            break;
                        }

                        if(array[i%3][j] == array[(i+1)%3][j] &&  array[(i+1)%3][j]  ==  array[(i+2)%3][j] ){
                            alert(array[i][j]+ ' win!');
                            init();
                            break;
                        }
                    }

                    if(array[0][0] && array[0][0] == array[1][1] && array[1][1]  == array[2][2]){
                        alert(array[0][0]+ ' win!');
                        init();
                        return;
                    }

                    if(array[2][0] && array[2][0] == array[1][1] && array[1][1]  == array[0][2]){
                        alert(array[0][0]+ ' win!');
                        init();
                        return;
                    }

                }
            }


        </script>
    </body>
</html>